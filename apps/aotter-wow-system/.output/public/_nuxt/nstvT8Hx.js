import{e as _,r as p,f as C,g,c as n,o as i,a as t,d as x,n as y,u as s,h as T,i as w,j as f,v,t as m,k as b}from"./C5HONyTf.js";import{u as V}from"./Bqc3Q5j0.js";const S={class:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center px-4"},$={class:"max-w-md w-full space-y-8"},A={class:"flex bg-gray-100 rounded-lg p-1"},B={class:"wow-card"},D={key:0},q={key:1,class:"bg-red-50 border border-red-200 rounded-md p-3"},z={class:"text-sm text-red-600"},E={key:2,class:"bg-green-50 border border-green-200 rounded-md p-3"},M={class:"text-sm text-green-600"},N=["disabled"],U={key:0,class:"inline-flex items-center"},j={key:1},H={class:"text-center"},O={class:"text-sm text-gray-600"},L=_({__name:"auth",setup(P){V({title:"Aotter Wow - 登入 / 註冊"});const o=p(!0),u=p(!1),d=p(""),r=p(""),a=C({username:"",email:"",password:""});g([o,a],()=>{d.value="",r.value=""});const h=async()=>{var c;u.value=!0,d.value="",r.value="";try{if(o.value){const e={email:a.email,password:a.password},{data:l}=await $fetch("/api/auth/login",{method:"POST",body:e});r.value="登入成功！",setTimeout(()=>{b("/")},1e3)}else{const e={username:a.username,email:a.email,password:a.password},{data:l}=await $fetch("/api/auth/register",{method:"POST",body:e});r.value="註冊成功！",setTimeout(()=>{b("/")},1e3)}}catch(e){console.error("Auth error:",e),d.value=((c=e.data)==null?void 0:c.message)||e.message||"操作失敗，請稍後再試"}finally{u.value=!1}},k=()=>{a.username="",a.email="",a.password=""};return g(o,()=>{k()}),(c,e)=>(i(),n("div",S,[t("div",$,[e[10]||(e[10]=t("div",{class:"text-center"},[t("h1",{class:"text-4xl font-bold text-gray-900 mb-2"},[x(" Aotter "),t("span",{class:"text-purple-600"},"Wow")]),t("p",{class:"text-gray-600"},"歡迎加入正向評價社群")],-1)),t("div",A,[t("button",{onClick:e[0]||(e[0]=l=>o.value=!0),class:y(["flex-1 py-2 px-4 rounded-md font-medium text-sm transition-all",s(o)?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," 登入 ",2),t("button",{onClick:e[1]||(e[1]=l=>o.value=!1),class:y(["flex-1 py-2 px-4 rounded-md font-medium text-sm transition-all",s(o)?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"])}," 註冊 ",2)]),t("div",B,[t("form",{onSubmit:T(h,["prevent"]),class:"space-y-6"},[s(o)?w("",!0):(i(),n("div",D,[e[6]||(e[6]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 mb-2"}," 使用者名稱 ",-1)),f(t("input",{id:"username","onUpdate:modelValue":e[2]||(e[2]=l=>s(a).username=l),type:"text",required:"",class:"wow-input",placeholder:"請輸入使用者名稱"},null,512),[[v,s(a).username]])])),t("div",null,[e[7]||(e[7]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email ",-1)),f(t("input",{id:"email","onUpdate:modelValue":e[3]||(e[3]=l=>s(a).email=l),type:"email",required:"",class:"wow-input",placeholder:"請輸入 Email"},null,512),[[v,s(a).email]])]),t("div",null,[e[8]||(e[8]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," 密碼 ",-1)),f(t("input",{id:"password","onUpdate:modelValue":e[4]||(e[4]=l=>s(a).password=l),type:"password",required:"",class:"wow-input",placeholder:"請輸入密碼"},null,512),[[v,s(a).password]])]),s(d)?(i(),n("div",q,[t("p",z,m(s(d)),1)])):w("",!0),s(r)?(i(),n("div",E,[t("p",M,m(s(r)),1)])):w("",!0),t("button",{type:"submit",disabled:s(u),class:"w-full wow-button disabled:opacity-50 disabled:cursor-not-allowed"},[s(u)?(i(),n("span",U,e[9]||(e[9]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" 處理中... ")]))):(i(),n("span",j,m(s(o)?"登入":"註冊"),1))],8,N)],32)]),t("div",H,[t("p",O,[x(m(s(o)?"還沒有帳號？":"已經有帳號了？")+" ",1),t("button",{onClick:e[5]||(e[5]=l=>o.value=!s(o)),class:"text-purple-600 hover:text-purple-700 font-medium"},m(s(o)?"立即註冊":"立即登入"),1)])])])]))}});export{L as default};
