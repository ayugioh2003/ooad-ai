# ä½¿ç”¨æ¡ˆä¾‹æ–‡ä»¶

## UML ä½¿ç”¨æ¡ˆä¾‹åœ–

```mermaid
graph TB
    %% åƒèˆ‡è€…
    Visitor[ğŸ‘¤ éŠå®¢<br/>Visitor]
    Admin[ğŸ‘¨â€ğŸ’¼ ç³»çµ±ç®¡ç†å“¡<br/>System Admin]
    System[ğŸ–¥ï¸ ç³»çµ±<br/>Zoo System]
    
    %% éŠå®¢ä½¿ç”¨æ¡ˆä¾‹
    subgraph "éŠå®¢åŠŸèƒ½"
        UC01[UC-01: é€²å…¥å‹•ç‰©åœ’]
        UC02[UC-02: ç€è¦½å‹•ç‰©è³‡è¨Š]
        UC03[UC-03: è§€çœ‹å‹•ç‰©è¡¨æ¼”]
        UC04[UC-04: è©•åˆ† Wow]
        UC05[UC-05: æŸ¥çœ‹ Wow æ”¶é›†è¨˜éŒ„]
        UC06[UC-06: æŸ¥çœ‹æ’è¡Œæ¦œ]
        UC07[UC-07: åˆ†äº« Wow]
    end
    
    %% ç®¡ç†å“¡ä½¿ç”¨æ¡ˆä¾‹
    subgraph "ç®¡ç†å“¡åŠŸèƒ½"
        UC08[UC-08: ç®¡ç†å‹•ç‰©è³‡è¨Š]
        UC09[UC-09: æŸ¥çœ‹ Wow çµ±è¨ˆ]
    end
    
    %% ç³»çµ±ä½¿ç”¨æ¡ˆä¾‹
    subgraph "ç³»çµ±åŠŸèƒ½"
        UC10[UC-10: è‡ªå‹•è§¸ç™¼è¡¨æ¼”]
    end
    
    %% é—œä¿‚é€£æ¥
    Visitor --> UC01
    Visitor --> UC02
    Visitor --> UC03
    Visitor --> UC04
    Visitor --> UC05
    Visitor --> UC06
    Visitor --> UC07
    
    Admin --> UC08
    Admin --> UC09
    
    System --> UC10
    
    %% åŒ…å«é—œä¿‚
    UC04 -.->|include| ValidateVisitor[é©—è­‰éŠå®¢èº«ä»½]
    UC07 -.->|include| GenerateShareLink[ç”Ÿæˆåˆ†äº«é€£çµ]
    
    %% æ“´å±•é—œä¿‚
    UC02 -.->|extend| ViewPerformanceHistory[æŸ¥çœ‹è¡¨æ¼”æ­·å²]
    UC05 -.->|extend| ExportRecords[åŒ¯å‡ºè¨˜éŒ„]
    
    %% ç³»çµ±è§¸ç™¼é—œä¿‚
    UC10 --> UC03
    UC03 --> UC04
```

## ä½¿ç”¨æ¡ˆä¾‹åœ–æ¦‚è¿°

æœ¬ç³»çµ±ä¸»è¦æœ‰å…©é¡ä½¿ç”¨è€…ï¼šéŠå®¢ï¼ˆVisitorï¼‰å’Œç³»çµ±ç®¡ç†å“¡ï¼ˆSystem Adminï¼‰ã€‚

## ä¸»è¦ä½¿ç”¨æ¡ˆä¾‹

### 1. éŠå®¢ä½¿ç”¨æ¡ˆä¾‹

#### UC-01: é€²å…¥å‹•ç‰©åœ’

**ä¸»è¦åƒèˆ‡è€…ï¼š** éŠå®¢  
**å‰ç½®æ¢ä»¶ï¼š** ç„¡  
**å¾Œç½®æ¢ä»¶ï¼š** éŠå®¢æˆåŠŸé€²å…¥ç³»çµ±  

**ä¸»è¦æµç¨‹ï¼š**
1. éŠå®¢é–‹å•Ÿå‹•ç‰©åœ’ç³»çµ±
2. ç³»çµ±æç¤ºè¼¸å…¥åç¨±
3. éŠå®¢è¼¸å…¥è‡ªé¸åç¨±
4. ç³»çµ±å»ºç«‹éŠå®¢è³‡æ–™
5. ç³»çµ±é¡¯ç¤ºæ­¡è¿è¨Šæ¯å’Œä¸»é¸å–®

**ä¾‹å¤–æµç¨‹ï¼š**
- 3a. éŠå®¢æœªè¼¸å…¥åç¨±
  - 3a.1. ç³»çµ±é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
  - 3a.2. è¿”å›æ­¥é©Ÿ2

#### UC-02: ç€è¦½å‹•ç‰©è³‡è¨Š

**ä¸»è¦åƒèˆ‡è€…ï¼š** éŠå®¢  
**å‰ç½®æ¢ä»¶ï¼š** éŠå®¢å·²é€²å…¥ç³»çµ±  
**å¾Œç½®æ¢ä»¶ï¼š** éŠå®¢æŸ¥çœ‹åˆ°å‹•ç‰©è©³ç´°è³‡è¨Š  

**ä¸»è¦æµç¨‹ï¼š**
1. éŠå®¢é¸æ“‡ã€Œç€è¦½å‹•ç‰©ã€åŠŸèƒ½
2. ç³»çµ±é¡¯ç¤ºæ‰€æœ‰å‹•ç‰©åˆ—è¡¨
3. éŠå®¢é¸æ“‡ç‰¹å®šå‹•ç‰©
4. ç³»çµ±é¡¯ç¤ºå‹•ç‰©è©³ç´°è³‡è¨Šï¼ˆåç¨±ã€ç¨®é¡ã€å¹´é½¡ã€ç‰¹è‰²ã€æŠ€èƒ½åˆ—è¡¨ï¼‰
5. ç³»çµ±é¡¯ç¤ºè©²å‹•ç‰©çš„ç•¶å‰è¡¨æ¼”ç‹€æ…‹

**ä¾‹å¤–æµç¨‹ï¼š**
- 2a. ç³»çµ±ä¸­ç„¡å‹•ç‰©è³‡æ–™
  - 2a.1. ç³»çµ±é¡¯ç¤ºã€Œç›®å‰æ²’æœ‰å‹•ç‰©ã€è¨Šæ¯

#### UC-03: è§€çœ‹å‹•ç‰©è¡¨æ¼”

**ä¸»è¦åƒèˆ‡è€…ï¼š** éŠå®¢  
**å‰ç½®æ¢ä»¶ï¼š** éŠå®¢å·²é€²å…¥ç³»çµ±ï¼Œç³»çµ±ä¸­æœ‰å‹•ç‰©åœ¨è¡¨æ¼”  
**å¾Œç½®æ¢ä»¶ï¼š** éŠå®¢è§€çœ‹äº†è¡¨æ¼”  

**ä¸»è¦æµç¨‹ï¼š**
1. ç³»çµ±éš¨æ©Ÿè§¸ç™¼å‹•ç‰©è¡¨æ¼”
2. ç³»çµ±é€šçŸ¥æœ‰è¡¨æ¼”é–‹å§‹
3. éŠå®¢é¸æ“‡è§€çœ‹è¡¨æ¼”
4. ç³»çµ±é¡¯ç¤ºè¡¨æ¼”è©³æƒ…ï¼ˆå‹•ç‰©ã€æŠ€èƒ½ã€åœ°é»ï¼‰
5. è¡¨æ¼”é€²è¡Œä¸­ï¼ŒéŠå®¢å¯ä»¥è§€çœ‹
6. è¡¨æ¼”çµæŸï¼Œç³»çµ±æç¤ºå¯ä»¥è©•åˆ†

**ä¾‹å¤–æµç¨‹ï¼š**
- 1a. æ²’æœ‰å‹•ç‰©å¯ä»¥è¡¨æ¼”
  - 1a.1. ç³»çµ±ç­‰å¾…å‹•ç‰©æº–å‚™å°±ç·’

#### UC-04: è©•åˆ† Wow

**ä¸»è¦åƒèˆ‡è€…ï¼š** éŠå®¢  
**å‰ç½®æ¢ä»¶ï¼š** éŠå®¢è§€çœ‹äº†è¡¨æ¼”ï¼Œä¸”å°šæœªå°æ­¤è¡¨æ¼”è©•åˆ†  
**å¾Œç½®æ¢ä»¶ï¼š** Wow è¨˜éŒ„è¢«å»ºç«‹ä¸¦å„²å­˜  

**ä¸»è¦æµç¨‹ï¼š**
1. è¡¨æ¼”çµæŸå¾Œï¼Œç³»çµ±é¡¯ç¤ºè©•åˆ†ä»‹é¢
2. éŠå®¢é¸æ“‡ Wow é¡å‹ï¼ˆå¯æ„›é¡/æŠ€èƒ½é¡/äº’å‹•é¡/é©šå–œé¡ï¼‰
3. éŠå®¢é¸æ“‡å¼·åº¦ç­‰ç´šï¼ˆ1-10åˆ†ï¼‰
4. éŠå®¢å¯é¸æ“‡æ€§æ·»åŠ è©•è«–
5. ç³»çµ±ç¢ºèªè©•åˆ†
6. ç³»çµ±å»ºç«‹ Wow è¨˜éŒ„
7. ç³»çµ±æ›´æ–°éŠå®¢çš„ç¸½ Wow é»æ•¸
8. ç³»çµ±é¡¯ç¤ºè©•åˆ†æˆåŠŸè¨Šæ¯

**ä¾‹å¤–æµç¨‹ï¼š**
- 1a. éŠå®¢å·²å°æ­¤è¡¨æ¼”è©•åˆ†
  - 1a.1. ç³»çµ±é¡¯ç¤ºã€Œå·²è©•åˆ†ã€è¨Šæ¯
  - 1a.2. ä¸å…è¨±é‡è¤‡è©•åˆ†

#### UC-05: æŸ¥çœ‹ Wow æ”¶é›†è¨˜éŒ„

**ä¸»è¦åƒèˆ‡è€…ï¼š** éŠå®¢  
**å‰ç½®æ¢ä»¶ï¼š** éŠå®¢å·²é€²å…¥ç³»çµ±  
**å¾Œç½®æ¢ä»¶ï¼š** éŠå®¢æŸ¥çœ‹åˆ°è‡ªå·±çš„æ”¶é›†è¨˜éŒ„  

**ä¸»è¦æµç¨‹ï¼š**
1. éŠå®¢é¸æ“‡ã€Œæˆ‘çš„æ”¶é›†ã€åŠŸèƒ½
2. ç³»çµ±é¡¯ç¤ºéŠå®¢çš„ Wow æ”¶é›†çµ±è¨ˆ
3. ç³»çµ±é¡¯ç¤ºå„é¡å‹ Wow çš„æ•¸é‡
4. ç³»çµ±é¡¯ç¤ºç¸½ Wow é»æ•¸
5. éŠå®¢å¯ä»¥é¸æ“‡æŸ¥çœ‹è©³ç´°è¨˜éŒ„
6. ç³»çµ±é¡¯ç¤ºæ¯ç­† Wow çš„è©³ç´°è³‡è¨Š

#### UC-06: æŸ¥çœ‹æ’è¡Œæ¦œ

**ä¸»è¦åƒèˆ‡è€…ï¼š** éŠå®¢  
**å‰ç½®æ¢ä»¶ï¼š** éŠå®¢å·²é€²å…¥ç³»çµ±  
**å¾Œç½®æ¢ä»¶ï¼š** éŠå®¢æŸ¥çœ‹åˆ°æ’è¡Œæ¦œè³‡è¨Š  

**ä¸»è¦æµç¨‹ï¼š**
1. éŠå®¢é¸æ“‡ã€Œæ’è¡Œæ¦œã€åŠŸèƒ½
2. ç³»çµ±é¡¯ç¤ºæ’è¡Œæ¦œé¸é …ï¼ˆéŠå®¢æ’è¡Œæ¦œ/å‹•ç‰©æ’è¡Œæ¦œï¼‰
3. éŠå®¢é¸æ“‡è¦æŸ¥çœ‹çš„æ’è¡Œæ¦œ
4. ç³»çµ±é¡¯ç¤ºå°æ‡‰çš„æ’è¡Œæ¦œè³‡æ–™
5. ç³»çµ±é¡¯ç¤ºéŠå®¢è‡ªå·±çš„æ’åä½ç½®

#### UC-07: åˆ†äº« Wow

**ä¸»è¦åƒèˆ‡è€…ï¼š** éŠå®¢  
**å‰ç½®æ¢ä»¶ï¼š** éŠå®¢æœ‰ Wow è¨˜éŒ„  
**å¾Œç½®æ¢ä»¶ï¼š** Wow è¢«æˆåŠŸåˆ†äº«  

**ä¸»è¦æµç¨‹ï¼š**
1. éŠå®¢åœ¨ Wow è¨˜éŒ„ä¸­é¸æ“‡ã€Œåˆ†äº«ã€
2. ç³»çµ±ç”Ÿæˆåˆ†äº«é€£çµ
3. ç³»çµ±é¡¯ç¤ºåˆ†äº«é¸é …ï¼ˆè¤‡è£½é€£çµ/ç›´æ¥é¡¯ç¤ºçµ¦å…¶ä»–éŠå®¢ï¼‰
4. éŠå®¢é¸æ“‡åˆ†äº«æ–¹å¼
5. ç³»çµ±åŸ·è¡Œåˆ†äº«å‹•ä½œ
6. ç³»çµ±é¡¯ç¤ºåˆ†äº«æˆåŠŸè¨Šæ¯

### 2. ç³»çµ±ç®¡ç†ä½¿ç”¨æ¡ˆä¾‹

#### UC-08: ç®¡ç†å‹•ç‰©è³‡è¨Š

**ä¸»è¦åƒèˆ‡è€…ï¼š** ç³»çµ±ç®¡ç†å“¡  
**å‰ç½®æ¢ä»¶ï¼š** ç®¡ç†å“¡å·²ç™»å…¥ç³»çµ±  
**å¾Œç½®æ¢ä»¶ï¼š** å‹•ç‰©è³‡è¨Šè¢«æˆåŠŸç®¡ç†  

**ä¸»è¦æµç¨‹ï¼š**
1. ç®¡ç†å“¡é¸æ“‡å‹•ç‰©ç®¡ç†åŠŸèƒ½
2. ç³»çµ±é¡¯ç¤ºå‹•ç‰©ç®¡ç†é¸é …ï¼ˆæ–°å¢/ä¿®æ”¹/åˆªé™¤/æŸ¥çœ‹ï¼‰
3. ç®¡ç†å“¡é¸æ“‡æ“ä½œé¡å‹
4. ç³»çµ±é¡¯ç¤ºå°æ‡‰çš„æ“ä½œä»‹é¢
5. ç®¡ç†å“¡è¼¸å…¥æˆ–ä¿®æ”¹å‹•ç‰©è³‡è¨Š
6. ç³»çµ±é©—è­‰è³‡æ–™
7. ç³»çµ±å„²å­˜è®Šæ›´
8. ç³»çµ±é¡¯ç¤ºæ“ä½œæˆåŠŸè¨Šæ¯

#### UC-09: æŸ¥çœ‹ Wow çµ±è¨ˆ

**ä¸»è¦åƒèˆ‡è€…ï¼š** ç³»çµ±ç®¡ç†å“¡  
**å‰ç½®æ¢ä»¶ï¼š** ç®¡ç†å“¡å·²ç™»å…¥ç³»çµ±ï¼Œç³»çµ±ä¸­æœ‰ Wow è³‡æ–™  
**å¾Œç½®æ¢ä»¶ï¼š** ç®¡ç†å“¡æŸ¥çœ‹åˆ°çµ±è¨ˆè³‡è¨Š  

**ä¸»è¦æµç¨‹ï¼š**
1. ç®¡ç†å“¡é¸æ“‡ã€ŒWow çµ±è¨ˆã€åŠŸèƒ½
2. ç³»çµ±é¡¯ç¤ºçµ±è¨ˆé¸é …ï¼ˆæ™‚é–“å€é–“/å‹•ç‰©/é¡å‹ç­‰ï¼‰
3. ç®¡ç†å“¡è¨­å®šç¯©é¸æ¢ä»¶
4. ç³»çµ±è¨ˆç®—ä¸¦é¡¯ç¤ºçµ±è¨ˆè³‡æ–™
5. ç³»çµ±æä¾›åœ–è¡¨æˆ–å ±è¡¨é¡¯ç¤º

## ç³»çµ±ä½¿ç”¨æ¡ˆä¾‹

#### UC-10: è‡ªå‹•è§¸ç™¼è¡¨æ¼”

**ä¸»è¦åƒèˆ‡è€…ï¼š** ç³»çµ±  
**å‰ç½®æ¢ä»¶ï¼š** ç³»çµ±é‹è¡Œä¸­ï¼Œæœ‰å‹•ç‰©è³‡æ–™  
**å¾Œç½®æ¢ä»¶ï¼š** è¡¨æ¼”è¢«æˆåŠŸè§¸ç™¼  

**ä¸»è¦æµç¨‹ï¼š**
1. ç³»çµ±å®šæœŸæª¢æŸ¥è¡¨æ¼”æ¢ä»¶
2. ç³»çµ±éš¨æ©Ÿé¸æ“‡å‹•ç‰©
3. ç³»çµ±æª¢æŸ¥å‹•ç‰©æ˜¯å¦å¯ä»¥è¡¨æ¼”
4. ç³»çµ±éš¨æ©Ÿé¸æ“‡å‹•ç‰©æŠ€èƒ½
5. ç³»çµ±å»ºç«‹è¡¨æ¼”è¨˜éŒ„
6. ç³»çµ±é€šçŸ¥æ‰€æœ‰åœ¨ç·šéŠå®¢
7. è¡¨æ¼”é–‹å§‹åŸ·è¡Œ

## ä½¿ç”¨æ¡ˆä¾‹é—œä¿‚

### åŒ…å«é—œä¿‚ï¼ˆIncludeï¼‰
- UC-04 è©•åˆ† Wow åŒ…å«é©—è­‰éŠå®¢èº«ä»½
- UC-07 åˆ†äº« Wow åŒ…å«ç”Ÿæˆåˆ†äº«é€£çµ

### æ“´å±•é—œä¿‚ï¼ˆExtendï¼‰
- UC-02 ç€è¦½å‹•ç‰©è³‡è¨Šå¯æ“´å±•ç‚ºæŸ¥çœ‹è¡¨æ¼”æ­·å²
- UC-05 æŸ¥çœ‹æ”¶é›†è¨˜éŒ„å¯æ“´å±•ç‚ºåŒ¯å‡ºè¨˜éŒ„

### æ³›åŒ–é—œä¿‚ï¼ˆGeneralizationï¼‰
- ç„¡æ˜é¡¯æ³›åŒ–éœ€æ±‚

## éåŠŸèƒ½éœ€æ±‚ç›¸é—œä½¿ç”¨æ¡ˆä¾‹

- **æ•ˆèƒ½ï¼š** æ‰€æœ‰æŸ¥è©¢æ“ä½œæ‡‰åœ¨2ç§’å…§å®Œæˆ
- **å¯ç”¨æ€§ï¼š** ç³»çµ±æ‡‰æ”¯æ´å¤šä½éŠå®¢åŒæ™‚ä½¿ç”¨
- **å¯é æ€§ï¼š** Wow è¨˜éŒ„ä¸æ‡‰éºå¤±
- **å®‰å…¨æ€§ï¼š** é˜²æ­¢æƒ¡æ„è©•åˆ†æˆ–åˆ·åˆ†è¡Œç‚º

## æ ¸å¿ƒæµç¨‹å¾ªåºåœ–

### Wow è©•åˆ†æµç¨‹

```mermaid
sequenceDiagram
    participant V as éŠå®¢ (Visitor)
    participant UI as ä½¿ç”¨è€…ä»‹é¢
    participant PS as è¡¨æ¼”æœå‹™ (PerformanceService)
    participant WS as Wowæœå‹™ (WowService)
    participant AM as å‹•ç‰©ç®¡ç† (AnimalManager)
    participant VS as è¨ªå®¢æœå‹™ (VisitorService)
    participant LB as æ’è¡Œæ¦œ (Leaderboard)
    
    Note over PS: ç³»çµ±è‡ªå‹•è§¸ç™¼è¡¨æ¼”
    PS->>AM: é¸æ“‡éš¨æ©Ÿå‹•ç‰©å’ŒæŠ€èƒ½
    AM->>PS: è¿”å›è¡¨æ¼”ç‰©ä»¶
    PS->>UI: é€šçŸ¥è¡¨æ¼”é–‹å§‹
    UI->>V: é¡¯ç¤ºè¡¨æ¼”é€šçŸ¥
    
    V->>UI: é¸æ“‡è§€çœ‹è¡¨æ¼”
    UI->>PS: ç²å–è¡¨æ¼”è©³æƒ…
    PS->>UI: è¿”å›è¡¨æ¼”è³‡è¨Š
    UI->>V: é¡¯ç¤ºè¡¨æ¼”é€²è¡Œä¸­
    
    Note over PS: è¡¨æ¼”çµæŸ
    PS->>UI: é€šçŸ¥è¡¨æ¼”çµæŸ
    UI->>V: é¡¯ç¤ºè©•åˆ†ä»‹é¢
    
    V->>UI: é¸æ“‡ Wow é¡å‹å’Œå¼·åº¦
    UI->>WS: å‰µå»º Wow è¨˜éŒ„
    WS->>WS: é©—è­‰è©•åˆ†è¦å‰‡
    WS->>WS: è¨ˆç®— Wow é»æ•¸
    WS->>VS: æ›´æ–°éŠå®¢ç¸½é»æ•¸
    WS->>LB: è§¸ç™¼æ’è¡Œæ¦œæ›´æ–°
    WS->>UI: è¿”å›è©•åˆ†æˆåŠŸ
    UI->>V: é¡¯ç¤ºè©•åˆ†å®ŒæˆåŠç²å¾—é»æ•¸
```

### å‹•ç‰©è¡¨æ¼”è‡ªå‹•è§¸ç™¼æµç¨‹

```mermaid
sequenceDiagram
    participant Scheduler as è¡¨æ¼”æ’ç¨‹å™¨
    participant AM as å‹•ç‰©ç®¡ç†å™¨
    participant A as å‹•ç‰© (Animal)
    participant P as è¡¨æ¼” (Performance)
    participant Observer as è§€å¯Ÿè€…å€‘
    
    loop æ¯éš”ä¸€æ®µæ™‚é–“
        Scheduler->>AM: æª¢æŸ¥å¯è¡¨æ¼”çš„å‹•ç‰©
        AM->>Scheduler: è¿”å›å¯ç”¨å‹•ç‰©åˆ—è¡¨
        
        alt æœ‰å¯ç”¨å‹•ç‰©
            Scheduler->>AM: éš¨æ©Ÿé¸æ“‡å‹•ç‰©å’ŒæŠ€èƒ½
            AM->>A: åŸ·è¡Œè¡¨æ¼”
            A->>P: å‰µå»ºè¡¨æ¼”ç‰©ä»¶
            P->>Observer: é€šçŸ¥è¡¨æ¼”é–‹å§‹
            
            Note over P: è¡¨æ¼”é€²è¡Œä¸­
            
            P->>Observer: é€šçŸ¥è¡¨æ¼”çµæŸ
            P->>P: è¨­ç‚ºéæ´»èºç‹€æ…‹
        else æ²’æœ‰å¯ç”¨å‹•ç‰©
            Scheduler->>Scheduler: ç­‰å¾…ä¸‹æ¬¡æª¢æŸ¥
        end
    end
```
